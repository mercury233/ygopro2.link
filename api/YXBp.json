{"title":"开发者文档(API)","date":"2017-02-01T23:33:33.000Z","date_formatted":{"ll":"2017年2月1日","L":"2017/02/01","MM-DD":"02-01"},"updated":"2017-02-01T23:33:33.000Z","content":"<p><strong>2022-10-27 Mercury233注：</strong></p>\n<p><strong>此文内容已过期，等待更新。</strong></p>\n<hr>\n<p>开源地址： <a href=\"https://github.com/lllyasviel/YGOProUnity_V2\" target=\"_blank\">https://github.com/lllyasviel/YGOProUnity_V2</a></p>\n<p>第一步 运行游戏。</p>\n<p>第二步 用记事本打开commamd.shell。</p>\n<p>第二点五步 把用户的头像以“用户名.png”的格式写入“texture\\face\\用户名.png”,写多少个都可以。</p>\n<p>第三步 输入以下五条指令中的任意【<strong>一条</strong>】并保存文件。（<strong>单行，没有回车符，所有涉及到的文件没有ydk,lua,yrp等扩展名</strong>）。</p>\n<p>online miaowu 118.178.111.167 233 0x133c</p>\n<p>online miaowu 118.178.111.167 233 0x133c password</p>\n<p>edit [Miao]割草光道</p>\n<p>puzzle Sample</p>\n<p>replay 任意录像名字无扩展名</p>\n<p>注意：</p>\n<p>1.游戏过程中建议不要把游戏关闭，再次启动游戏可能耗时较久。</p>\n<p>2.只要commamd.shell存在就会无条件执行指令，commamd.shell不存在则意味着玩家正在对战或者正在编辑一个没有保存的卡组。</p>\n<p>3.可以通过控制窗口的句柄来实现最小化。</p>\n<p>4.请在指令执行之前把头像写入完毕。对战中游戏不会扫描目录里的头像。</p>\n<p>5.不必担心文件读写冲突导致游戏崩溃，游戏内部做了完好的文件读写锁。</p>\n<p>6.每条指令执行完毕之后，shell文件会被清空。</p>\n<p>7.切记commamd.shell的编码是UTF8，请在命令内部有中文的时候小心。</p>\n<p>8.无论输入什么杂鱼东西都会被程序在读取之后立刻清空。利用这一点可以检测游戏是否在指令待命状态。你可以在commamd.shell内部输入“miaowu”,如果它被清空了，说明程序正在等待你的指令，如果没有发生什么事情，说明玩家正在操作（对战中，卡组没有保存的编辑中），这时程序不会理会你的指令。</p>\n<p>9.利用8，你可以在获取游戏窗口句柄之后实现大厅界面最小化和游戏最小化之间的切换。（进入指令待命状态则游戏最小化，一旦指令待命取消，立刻游戏窗口前台激活。）</p>\n<p>下面是程序读入指令的代码，c#语法。供参考。</p>\n<figure class=\"highlight c#\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">all = File.ReadAllText(<span class=\"string\">&quot;commamd.shell&quot;</span>, Encoding.UTF8);</span><br><span class=\"line\"><span class=\"built_in\">char</span>[] parmChars = all.ToCharArray();</span><br><span class=\"line\"><span class=\"built_in\">bool</span> inQuote = <span class=\"literal\">false</span>;</span><br><span class=\"line\"><span class=\"keyword\">for</span> (<span class=\"built_in\">int</span> index = <span class=\"number\">0</span>; index &lt; parmChars.Length; index++)</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">\t<span class=\"keyword\">if</span> (parmChars[index] == <span class=\"string\">&#x27;&quot;&#x27;</span>)</span><br><span class=\"line\">\t&#123;</span><br><span class=\"line\">\t\tinQuote = !inQuote;</span><br><span class=\"line\">\t\tparmChars[index] = <span class=\"string\">&#x27;\\n&#x27;</span>;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\t<span class=\"keyword\">if</span> (!inQuote &amp;&amp; parmChars[index] == <span class=\"string\">&#x27; &#x27;</span>)</span><br><span class=\"line\">\t\tparmChars[index] = <span class=\"string\">&#x27;\\n&#x27;</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"built_in\">string</span>[] mats = (<span class=\"keyword\">new</span> <span class=\"built_in\">string</span>(parmChars)).Split(<span class=\"keyword\">new</span> <span class=\"built_in\">char</span>[] &#123; <span class=\"string\">&#x27;\\n&#x27;</span> &#125;, StringSplitOptions.RemoveEmptyEntries);</span><br><span class=\"line\"><span class=\"keyword\">if</span> (mats.Length &gt; <span class=\"number\">0</span>)</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">\t<span class=\"keyword\">switch</span> (mats[<span class=\"number\">0</span>])</span><br><span class=\"line\">\t&#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">case</span> <span class=\"string\">&quot;online&quot;</span>:</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">if</span> (mats.Length == <span class=\"number\">5</span>)</span><br><span class=\"line\">\t\t\t&#123;</span><br><span class=\"line\">\t\t\t\tUIHelper.iniFaces();<span class=\"comment\">//加载用户头像</span></span><br><span class=\"line\">\t\t\t\tProgram.I().selectServer.KF_onlineGame(mats[<span class=\"number\">1</span>], mats[<span class=\"number\">2</span>], mats[<span class=\"number\">3</span>], mats[<span class=\"number\">4</span>]);</span><br><span class=\"line\">\t\t\t&#125;</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">if</span> (mats.Length == <span class=\"number\">6</span>)</span><br><span class=\"line\">\t\t\t&#123;</span><br><span class=\"line\">\t\t\t\tUIHelper.iniFaces();</span><br><span class=\"line\">\t\t\t\tProgram.I().selectServer.KF_onlineGame(mats[<span class=\"number\">1</span>], mats[<span class=\"number\">2</span>], mats[<span class=\"number\">3</span>], mats[<span class=\"number\">4</span>], mats[<span class=\"number\">5</span>]);</span><br><span class=\"line\">\t\t\t&#125;</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">break</span>;</span><br><span class=\"line\">\t\t<span class=\"keyword\">case</span> <span class=\"string\">&quot;edit&quot;</span>:</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">if</span> (mats.Length == <span class=\"number\">2</span>)</span><br><span class=\"line\">\t\t\t&#123;</span><br><span class=\"line\">\t\t\t\tProgram.I().selectDeck.KF_editDeck(mats[<span class=\"number\">1</span>]);<span class=\"comment\">//编辑卡组</span></span><br><span class=\"line\">\t\t\t&#125;</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">break</span>;</span><br><span class=\"line\">\t\t<span class=\"keyword\">case</span> <span class=\"string\">&quot;replay&quot;</span>:</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">if</span> (mats.Length == <span class=\"number\">2</span>)</span><br><span class=\"line\">\t\t\t&#123;</span><br><span class=\"line\">\t\t\t\tUIHelper.iniFaces();</span><br><span class=\"line\">\t\t\t\tProgram.I().selectReplay.KF_replay(mats[<span class=\"number\">1</span>]);<span class=\"comment\">//编辑录像</span></span><br><span class=\"line\">\t\t\t&#125;</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">break</span>;</span><br><span class=\"line\">\t\t<span class=\"keyword\">case</span> <span class=\"string\">&quot;puzzle&quot;</span>:</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">if</span> (mats.Length == <span class=\"number\">2</span>)</span><br><span class=\"line\">\t\t\t&#123;</span><br><span class=\"line\">\t\t\t\tUIHelper.iniFaces();</span><br><span class=\"line\">\t\t\t\tProgram.I().puzzleMode.KF_puzzle(mats[<span class=\"number\">1</span>]);<span class=\"comment\">//运行残局</span></span><br><span class=\"line\">\t\t\t&#125;</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">break</span>;</span><br><span class=\"line\">\t\t<span class=\"literal\">default</span>:</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">break</span>;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n","link":"api","plink":"https://ygopro2.link/api/","copyright":{"author":"一秒一喵机会","license":"&copy; YGOPro2 Laboratory","updated":"2017年2月1日"}}